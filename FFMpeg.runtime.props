<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
	<Target Name="CopyBuildWindows" AfterTargets="AfterBuild" Condition="'$([System.Runtime.InteropServices.RuntimeInformation]::IsOSPlatform($([System.Runtime.InteropServices.OSPlatform]::Windows)))' == 'true'">
		<ItemGroup>
			<ANTLR Include="$(MSBuildThisFileDirectory)..\..\builds\win-x64\*.dll" />
		</ItemGroup>
		<Copy SourceFiles="@(ANTLR)" DestinationFolder="$(OutDir)" SkipUnchangedFiles="true" />
	</Target>	
	
	<Target Name="CopyPublisWindows" AfterTargets="Publish" Condition="'$([System.Runtime.InteropServices.RuntimeInformation]::IsOSPlatform($([System.Runtime.InteropServices.OSPlatform]::Windows)))' == 'true'">
		<ItemGroup>
			<ANTLR Include="$(MSBuildThisFileDirectory)..\..\builds\win-x64\*.dll" />
		</ItemGroup>
		<Copy SourceFiles="@(ANTLR)" DestinationFolder="$(PublishDir)" SkipUnchangedFiles="true" />
	</Target>	
    
    <Target Name="CopyBuildLinux" AfterTargets="AfterBuild" Condition="'$([System.Runtime.InteropServices.RuntimeInformation]::IsOSPlatform($([System.Runtime.InteropServices.OSPlatform]::Linux)))' == 'true'">
		<ItemGroup>
			<ANTLR Include="../ffmpeg/linux64/*.so*" />
		</ItemGroup>
		<Copy SourceFiles="@(ANTLR)" DestinationFolder="$(OutDir)" SkipUnchangedFiles="true" />
	</Target>	
	
    <Target Name="CopyPublisLinux" AfterTargets="Publish" Condition="'$([System.Runtime.InteropServices.RuntimeInformation]::IsOSPlatform($([System.Runtime.InteropServices.OSPlatform]::Linux)))' == 'true'">
		<ItemGroup>
			<ANTLR Include="../ffmpeg/linux64/*.so*" />
		</ItemGroup>
		<Copy SourceFiles="@(ANTLR)" DestinationFolder="$(PublishDir)" SkipUnchangedFiles="true" />
	</Target>	
</Project>
